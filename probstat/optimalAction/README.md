# 最適行動列アルゴリズム

## 実装
haskellで後ろ向きアルゴリズムを実装した．ソースは`optimalAction.hs`で，実行手順は以下の通り．
```
$ ghci
> :l optimalAction
> optAct 0 20 1 [0.01, 0.05, 0.1, 0.15, 0.0] [0.3, 0.5, 0.7, 0.9, 0] [2, 2, 2, 2, 0] 6
```

引数のパラメータは順番に $s_d$, $s_c$,$\alpha$,$\{\beta_a\}$,$\{\lambda_a\}$,$\{e_a\}$,$T$である．結果は$V^*_{t=0}(s)$とそのステップで取ったアクションの$s$に関するリストとして出力される．つまり$T$ステップ後のエネルギーに関する確率分布.

## 実行結果
スライドのSuggested Parameter Rangesで実行した結果は次のようになった．
```
optAct 0 20 1 [0.01, 0.05, 0.1, 0.15, 0.0] [0.3, 0.5, 0.7, 0.9, 0] [2, 2, 2, 2, 0] 6
[(0.0,-1),(0.5556214105875,3),(0.6401657947883906,3),(0.775082320115625,1),
(0.8117016219411658,0),(0.9244766804748749,0),(0.9376623395690882,0),(1.0,4),
(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),
(1.0,4),(1.0,4),(1.0,4),(1.0,4)]
```
リストの最左が$s=s_d$の時，最右が$s=s_c$の時に対応している．
この状況下では，
- 餌場4(スライドでいう$a=5$)に止まって，餌もないが捕食の危険もない環境で耐えしのいでいる右寄りの行動パターン．捕食の可能性はなく，最初のエネルギーによっては確率1で生存できる．
- 左寄りの，餓死寸前でハイリスクハイリターンの餌場3に手を出す行動パターン
- それらの中間で，ローリスクローリターンの餌場0にいるパターン
が見られる．餌場2を選ぶ個体は少ない．

## 考察
### 時間による違い
$T=6$以前での振る舞いはどうなるか．$T=3$の時は,
```
optAct 0 20 1 [0.01, 0.05, 0.1, 0.15, 0.0] [0.3, 0.5, 0.7, 0.9, 0] [2, 2, 2, 2, 0] 3
[(0.0,-1),(0.6413568749999999,3),(0.838375,1),(0.8779938749999999,0),
(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),
(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4)]
```
最初のエネルギーが残っているので，餌場4を使うパターンが多い．最初からエネルギーが少ない場合は，餌場3,1に頼らざるを得ない．


### 同じ環境下での基礎代謝量による振る舞いの違い
基礎代謝量$\alpha$を2に変えてみる．
```
optAct 0 20 2 [0.01, 0.05, 0.1, 0.15, 0.0] [0.3, 0.5, 0.7, 0.9, 0] [2, 2, 2, 2, 0] 6
[(0.0,-1),(0.20043271573326563,3),(0.20043271573326563,3),(0.3762148360290469,3),
(0.3762148360290469,3),(0.5175575262697499,2),(0.5175575262697499,2),
(0.6691120803642936,1),(0.6691120803642936,1),(0.8188693643984161,0),
(0.8188693643984161,0),(0.9376623395690882,0),(0.9376623395690882,0),
(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4),(1.0,4)]
```
餌場4にいくパターンは少なくなった．最初のエネルギーを使い果たす時間も早くなるので，納得がいく．


### 餌場の状況を変えてみる
今，餌場4は捕食される確率が0になっていた．これを0でない値にすると，4に留まるのが有利ではなくなるはずである．
```
optAct 0 20 1 [0.01, 0.05, 0.1, 0.15, 0.05] [0.3, 0.5, 0.7, 0.9, 0] [2, 2, 2, 2, 0] 6
[(0.0,-1),(0.5449315722122249,3),(0.6317392741762218,3),(0.7569969905835561,1),
(0.7978635686006764,0),(0.8932189173072904,0),(0.9076972869354031,0),
(0.9414801494009997,0),(0.9414801494009997,0),(0.9414801494009997,0),
(0.9414801494009997,0),(0.9414801494009997,0),(0.9414801494009997,0),
(0.9414801494009997,0),(0.9414801494009997,0),(0.9414801494009997,0),
(0.9414801494009997,0),(0.9414801494009997,0),(0.9414801494009997,0),
(0.9414801494009997,0),(0.9414801494009997,0)]
```
予想の通りで，0にいくのが最適に変わった．


